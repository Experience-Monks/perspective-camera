!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports=e("./lib/camera-perspective")},{"./lib/camera-perspective":4}],2:[function(e,t,n){var r=e("object-assign"),i=e("ray-3d"),o=e("camera-project"),s=e("camera-unproject"),a=e("./camera-look-at"),u=e("camera-picking-ray"),c=e("gl-vec3/add"),l=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),p=e("gl-mat4/identity"),v=e("gl-vec3/set");t.exports=function(e){function t(){l(w.projView,w.projection,w.view);var e=f(w.invProjView,w.projView);if(!e)throw new Error("camera projection * view is non-invertible")}function n(e){return a(w.direction,w.up,w.position,e),w}function h(){return v(w.position,0,0,0),v(w.direction,0,0,-1),v(w.up,0,1,0),p(w.view),p(w.projection),p(w.projView),p(w.invProjView),w}function d(e){return c(w.position,w.position,e),w}function g(e){var t=new i;return u(t.origin,t.direction,e,w.viewport,w.invProjView),t}function m(e){return o([],e,w.viewport,w.projView)}function y(e){return s([],e,w.viewport,w.invProjView)}e=e||{};var w={projection:p([]),view:p([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:p([]),invProjView:p([])};return r(w,{translate:d,identity:h,lookAt:n,createPickingRay:g,update:t,project:m,unproject:y})}},{"./camera-look-at":3,"camera-picking-ray":9,"camera-project":10,"camera-unproject":13,"gl-mat4/identity":25,"gl-mat4/invert":26,"gl-mat4/multiply":28,"gl-vec3/add":30,"gl-vec3/set":37,"object-assign":42,"ray-3d":43}],3:[function(e,t,n){var r=e("gl-vec3/cross"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize"),s=e("gl-vec3/copy"),a=[0,0,0];t.exports=function(e,t,n,u){s(e,u),i(e,e,n),o(e,e),r(a,e,t),o(a,a),r(t,a,e),o(t,t)}},{"gl-vec3/copy":31,"gl-vec3/cross":32,"gl-vec3/normalize":34,"gl-vec3/subtract":39}],4:[function(e,t,n){var r=e("./camera-base"),i=e("object-assign"),o=e("defined"),s=e("gl-mat4/perspective"),a=e("gl-mat4/lookAt"),u=e("gl-vec3/add");t.exports=function(e){function t(){var e=Math.max(1e-5,n.near),t=n.viewport[2]/n.viewport[3];return s(n.projection,n.fov,t,e,n.far),u(c,n.position,n.direction),a(n.view,n.position,c,n.up),l(),n}e=e||{};var n=r(e);n.fov=o(e.fov,Math.PI/4),n.near=o(e.near,0),n.far=o(e.far,100);var c=[0,0,0],l=n.update;return t(),i(n,{update:t})}},{"./camera-base":2,defined:23,"gl-mat4/lookAt":27,"gl-mat4/perspective":29,"gl-vec3/add":30,"object-assign":42}],5:[function(e,t,n){t.exports=function(e){if("undefined"==typeof document)return null;e=e||{};var t=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(t.width=e.width),"number"==typeof e.height&&(t.height=e.height);try{return t.getContext("2d",e)||null}catch(n){return null}}},{}],6:[function(e,t,n){t.exports=function(e,t){var n="number"==typeof e,r="number"==typeof t;n&&!r?(t=e,e=0):n||r||(e=0,t=0),e=0|e,t=0|t;var i=t-e;if(0>i)throw new Error("array length must be positive");for(var o=new Array(i),s=0,a=e;i>s;s++,a++)o[s]=a;return o}},{}],7:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],8:[function(e,t,n){function r(){l=!1,a.length?c=a.concat(c):f=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(a=c,c=[];++f<t;)a[f].run();f=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new o(e,t)),l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],9:[function(e,t,n){function r(e,t,n,r,u){o(e,n[0],n[1],0),o(t,n[0],n[1],1),i(e,e,r,u),i(t,t,r,u),s(t,t,e),a(t,t)}var i=e("camera-unproject"),o=e("gl-vec3/set"),s=e("gl-vec3/subtract"),a=e("gl-vec3/normalize");t.exports=r},{"camera-unproject":13,"gl-vec3/normalize":34,"gl-vec3/set":37,"gl-vec3/subtract":39}],10:[function(e,t,n){function r(e,t,n,r){var c=n[0],l=n[1],f=n[2],p=n[3],v=s,h=a;o(u,t[0],t[1],t[2],1),i(u,u,r);var d=u[3];return 0!==d&&(u[0]=u[0]/d,u[1]=u[1]/d,u[2]=u[2]/d),e[0]=c+f/2*u[0]+(0+f/2),e[1]=l+p/2*u[1]+(0+p/2),e[2]=(h-v)/2*u[2]+(h+v)/2,e[3]=0===d?0:1/d,e}var i=e("gl-vec4/transformMat4"),o=e("gl-vec4/set"),s=0,a=1,u=[0,0,0,0];t.exports=r},{"gl-vec4/set":11,"gl-vec4/transformMat4":12}],11:[function(e,t,n){function r(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}t.exports=r},{}],12:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}t.exports=r},{}],13:[function(e,t,n){function r(e,t,n,r){var o=n[0],s=n[1],a=n[2],u=n[3],c=t[0],l=t[1],f=t[2];return c-=o,l=u-l-1,l-=s,e[0]=2*c/a-1,e[1]=2*l/u-1,e[2]=2*f-1,i(e,e,r)}var i=e("./lib/projectMat4");t.exports=r},{"./lib/projectMat4":14}],14:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],u=n[2],c=n[3],l=n[4],f=n[5],p=n[6],v=n[7],h=n[8],d=n[9],g=n[10],m=n[11],y=n[12],w=n[13],x=n[14],b=n[15],_=1/(r*c+i*v+o*m+b);return e[0]=(r*s+i*l+o*h+y)*_,e[1]=(r*a+i*f+o*d+w)*_,e[2]=(r*u+i*p+o*g+x)*_,e}t.exports=r},{}],15:[function(e,t,n){var r=e("canvas-fit"),i=e("raf-loop");t.exports=function(e,t){function n(){o();var t=e.width,n=e.height;a[0]=t/o.scale,a[1]=n/o.scale}t=t||{};var o=r(e,t.parent,t.scale),s=i(),a=[0,0];return n(),window.addEventListener("resize",function(){n(),s.emit("resize")},!1),Object.defineProperties(s,{scale:{get:function(){return o.scale},set:function(e){o.scale=e}},shape:{get:function(){return a}},parent:{get:function(){return o.parent},set:function(e){o.parent=e}}}),s}},{"canvas-fit":16,"raf-loop":18}],16:[function(e,t,n){function r(e,t,n){function r(){var t=r.parent||e.parentNode;if("function"==typeof t)var n=t(o)||o,s=n[0],a=n[1];else if(t&&t!==document.body)var u=i(t),s=0|u[0],a=0|u[1];else var s=window.innerWidth,a=window.innerHeight;return e.width=s*r.scale,e.height=a*r.scale,e.style.width=s+"px",e.style.height=a+"px",r}return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,r.scale=parseFloat(n||1),r.parent=t,r()}var i=e("element-size");t.exports=r;var o=new Float32Array(2)},{"element-size":17}],17:[function(e,t,n){function r(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var n=e.getBoundingClientRect(),r=getComputedStyle(e),o=(0|n.height)+i(r.getPropertyValue("margin-top"))+i(r.getPropertyValue("margin-bottom")),s=(0|n.width)+i(r.getPropertyValue("margin-left"))+i(r.getPropertyValue("margin-right"));return t&&document.body.removeChild(e),[s,o]}function i(e){return parseFloat(e)||0}t.exports=r},{}],18:[function(e,t,n){function r(e){return this instanceof r?(this.running=!1,this.last=s(),this._frame=0,this._tick=this.tick.bind(this),void(e&&this.on("tick",e))):new r(e)}var i=e("inherits"),o=e("events").EventEmitter,s=e("right-now"),a=e("@mattdesl/raf");t.exports=r,i(r,o),r.prototype.start=function(){return this.running?void 0:(this.running=!0,this.last=s(),this._frame=a(this._tick),this)},r.prototype.stop=function(){return this.running=!1,0!==this._frame&&a.cancel(this._frame),this._frame=0,this},r.prototype.tick=function(){this._frame=a(this._tick);var e=s(),t=e-this.last;this.emit("tick",t),this.last=e}},{"@mattdesl/raf":19,events:7,inherits:21,"right-now":22}],19:[function(e,t,n){for(var r=e("performance-now"),i="undefined"==typeof window?{}:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],u=i["cancel"+s]||i["cancelRequest"+s],c=0;c<o.length&&!a;c++)a=i[o[c]+"Request"+s],u=i[o[c]+"Cancel"+s]||i[o[c]+"CancelRequest"+s];if(!a||!u){var l=0,f=0,p=[],v=1e3/60;a=function(e){if(0===p.length){var t=r(),n=Math.max(0,v-(t-l));l=n+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return p.push({handle:++f,callback:e,cancelled:!1}),f},u=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}t.exports=function(e){return a.call(i,e)},t.exports.cancel=function(){u.apply(i,arguments)}},{"performance-now":20}],20:[function(e,t,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:8}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],24:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=t;for(r=0|r,i="number"==typeof i?0|i:n.length;i>r&&r<n.length;r++){var s=n[r],a=o[s[0]],u=o[s[1]],c=o[s[2]];e.moveTo(a[0],a[1]),e.lineTo(u[0],u[1]),e.lineTo(c[0],c[1]),e.lineTo(a[0],a[1])}}},{}],25:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],26:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],v=t[11],h=t[12],d=t[13],g=t[14],m=t[15],y=n*a-r*s,w=n*u-i*s,x=n*c-o*s,b=r*u-i*a,_=r*c-o*a,j=i*c-o*u,L=l*d-f*h,E=l*g-p*h,k=l*m-v*h,M=f*g-p*d,T=f*m-v*d,A=p*m-v*g,P=y*A-w*T+x*M+b*k-_*E+j*L;return P?(P=1/P,e[0]=(a*A-u*T+c*M)*P,e[1]=(i*T-r*A-o*M)*P,e[2]=(d*j-g*_+m*b)*P,e[3]=(p*_-f*j-v*b)*P,e[4]=(u*k-s*A-c*E)*P,e[5]=(n*A-i*k+o*E)*P,e[6]=(g*x-h*j-m*w)*P,e[7]=(l*j-p*x+v*w)*P,e[8]=(s*T-a*k+c*L)*P,e[9]=(r*k-n*T-o*L)*P,e[10]=(h*_-d*x+m*y)*P,e[11]=(f*x-l*_-v*y)*P,e[12]=(a*E-s*M-u*L)*P,e[13]=(n*M-r*E+i*L)*P,e[14]=(d*w-h*b-g*y)*P,e[15]=(l*b-f*w+p*y)*P,e):null}t.exports=r},{}],27:[function(e,t,n){function r(e,t,n,r){var o,s,a,u,c,l,f,p,v,h,d=t[0],g=t[1],m=t[2],y=r[0],w=r[1],x=r[2],b=n[0],_=n[1],j=n[2];return Math.abs(d-b)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(m-j)<1e-6?i(e):(f=d-b,p=g-_,v=m-j,h=1/Math.sqrt(f*f+p*p+v*v),f*=h,p*=h,v*=h,o=w*v-x*p,s=x*f-y*v,a=y*p-w*f,h=Math.sqrt(o*o+s*s+a*a),h?(h=1/h,o*=h,s*=h,a*=h):(o=0,s=0,a=0),u=p*a-v*s,c=v*o-f*a,l=f*s-p*o,h=Math.sqrt(u*u+c*c+l*l),h?(h=1/h,u*=h,c*=h,l*=h):(u=0,c=0,l=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=s,e[5]=c,e[6]=p,e[7]=0,e[8]=a,e[9]=l,e[10]=v,e[11]=0,e[12]=-(o*d+s*g+a*m),e[13]=-(u*d+c*g+l*m),e[14]=-(f*d+p*g+v*m),e[15]=1,e)}var i=e("./identity");t.exports=r},{"./identity":25}],28:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],v=t[10],h=t[11],d=t[12],g=t[13],m=t[14],y=t[15],w=n[0],x=n[1],b=n[2],_=n[3];return e[0]=w*r+x*a+b*f+_*d,e[1]=w*i+x*u+b*p+_*g,e[2]=w*o+x*c+b*v+_*m,e[3]=w*s+x*l+b*h+_*y,w=n[4],x=n[5],b=n[6],_=n[7],e[4]=w*r+x*a+b*f+_*d,e[5]=w*i+x*u+b*p+_*g,e[6]=w*o+x*c+b*v+_*m,e[7]=w*s+x*l+b*h+_*y,w=n[8],x=n[9],b=n[10],_=n[11],e[8]=w*r+x*a+b*f+_*d,e[9]=w*i+x*u+b*p+_*g,e[10]=w*o+x*c+b*v+_*m,e[11]=w*s+x*l+b*h+_*y,w=n[12],x=n[13],b=n[14],_=n[15],e[12]=w*r+x*a+b*f+_*d,e[13]=w*i+x*u+b*p+_*g,e[14]=w*o+x*c+b*v+_*m,e[15]=w*s+x*l+b*h+_*y,e}t.exports=r},{}],29:[function(e,t,n){function r(e,t,n,r,i){var o=1/Math.tan(t/2),s=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*s,e[15]=0,e}t.exports=r},{}],30:[function(e,t,n){function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=r},{}],31:[function(e,t,n){function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=r},{}],32:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],u=n[2];return e[0]=i*u-o*a,e[1]=o*s-r*u,e[2]=r*a-i*s,e}t.exports=r},{}],33:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],34:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],35:[function(e,t,n){function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}t.exports=r},{}],36:[function(e,t,n){function r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}t.exports=r},{}],37:[function(e,t,n){function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}t.exports=r},{}],38:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}t.exports=r},{}],39:[function(e,t,n){function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=r},{}],40:[function(e,t,n){function r(e){e=0|+e;var t=[],n=[],r=.5+Math.sqrt(5)/2;t.push([-1,+r,0]),t.push([1,+r,0]),t.push([-1,-r,0]),t.push([1,-r,0]),t.push([0,-1,+r]),t.push([0,1,+r]),t.push([0,-1,-r]),t.push([0,1,-r]),t.push([+r,0,-1]),t.push([+r,0,1]),t.push([-r,0,-1]),t.push([-r,0,1]),n.push([0,11,5]),n.push([0,5,1]),n.push([0,1,7]),n.push([0,7,10]),n.push([0,10,11]),n.push([1,5,9]),n.push([5,11,4]),n.push([11,10,2]),n.push([10,7,6]),n.push([7,1,8]),n.push([3,9,4]),n.push([3,4,2]),n.push([3,2,6]),n.push([3,6,8]),n.push([3,8,9]),n.push([4,9,5]),n.push([2,4,11]),n.push([6,2,10]),n.push([8,6,7]),n.push([9,8,1]);for(var s={cells:n,positions:t};e-->0;)s=i(s);t=s.positions;for(var a=0;a<t.length;a++)o(t[a]);return s}function i(e){function t(e,t){var i=r(e,t),o=n(i),s=u[o];return s?s:u[o]=i}function n(e){return e[0].toPrecision(6)+","+e[1].toPrecision(6)+","+e[2].toPrecision(6)}function r(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}for(var i=e.positions,o=e.cells,s=[],a=[],u={},c=0,l=0;l<o.length;l++){var f=o[l],p=f[0],v=f[1],h=f[2],d=i[p],g=i[v],m=i[h],y=t(d,g),w=t(g,m),x=t(m,d),b=a.indexOf(y);-1===b&&(b=c++,a.push(y));var _=a.indexOf(w);-1===_&&(_=c++,a.push(w));var j=a.indexOf(x);-1===j&&(j=c++,a.push(x));var L=a.indexOf(d);-1===L&&(L=c++,a.push(d));var E=a.indexOf(g);-1===E&&(E=c++,a.push(g));var k=a.indexOf(m);-1===k&&(k=c++,a.push(m)),s.push([L,b,j]),s.push([E,_,b]),s.push([k,j,_]),s.push([b,_,j])}return{cells:s,positions:a}}var o=e("vectors/normalize-nd");t.exports=r},{"vectors/normalize-nd":41}],41:[function(e,t,n){function r(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]*e[n];if(t=Math.sqrt(t),0===t)return Array.apply(null,new Array(e.length)).map(Number.prototype.valueOf,0);for(var n=0;n<e.length;n++)e[n]/=t;return e}t.exports=r},{}],42:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,i,o=r(e),s=1;s<arguments.length;s++){n=arguments[s],i=Object.keys(Object(n));for(var a=0;a<i.length;a++)o[i[a]]=n[i[a]]}return o}},{}],43:[function(e,t,n){function r(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}var i=e("ray-triangle-intersection"),o=e("ray-plane-intersection"),s=e("ray-sphere-intersection"),a=e("gl-vec3/copy"),u=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];t.exports=r,r.prototype.set=function(e,t){this.origin=e,this.direction=t},r.prototype.copy=function(e){a(this.origin,e.origin),a(this.direction,e.direction)},r.prototype.clone=function(){var e=new r;return e.copy(this),e},r.prototype.intersectsSphere=function(e,t){return s(c,this.origin,this.direction,e,t)},r.prototype.intersectsPlane=function(e,t){return o(c,this.origin,this.direction,e,t)},r.prototype.intersectsTriangle=function(e){return i(c,this.origin,this.direction,e)},r.prototype.intersectsTriangleCell=function(e,t){var n=e[0],r=e[1],i=e[2];return u[0]=t[n],u[1]=t[r],u[2]=t[i],this.intersectsTriangle(u)}},{"gl-vec3/copy":31,"ray-plane-intersection":44,"ray-sphere-intersection":45,"ray-triangle-intersection":46}],44:[function(e,t,n){function r(e,t,n,r,c){var l=i(n,r);if(0!==l){var f=-(i(t,r)+c)/l;return 0>f?null:(s(u,n,f),o(e,t,u))}return i(r,t)+c===0?a(e,t):null}var i=e("gl-vec3/dot"),o=e("gl-vec3/add"),s=e("gl-vec3/scale"),a=e("gl-vec3/copy");t.exports=r;var u=[0,0,0]},{"gl-vec3/add":30,"gl-vec3/copy":31,"gl-vec3/dot":33,"gl-vec3/scale":35}],45:[function(e,t,n){function r(e,t,n,r,f){s(l,r,t);var p=o(n,l);if(0>p)return null;a(l,t,n,p);var v=i(r,l),h=f*f;return v>h?null:(u(e,n,p-Math.sqrt(h-v)),c(e,e,t))}var i=e("gl-vec3/squaredDistance"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),a=e("gl-vec3/scaleAndAdd"),u=e("gl-vec3/scale"),c=e("gl-vec3/add"),l=[0,0,0];t.exports=r},{"gl-vec3/add":30,"gl-vec3/dot":33,"gl-vec3/scale":35,"gl-vec3/scaleAndAdd":36,"gl-vec3/squaredDistance":38,"gl-vec3/subtract":39}],46:[function(e,t,n){function r(e,t,n,r){s(u,r[1],r[0]),s(c,r[2],r[0]),i(f,n,c);var v=o(u,f);if(a>v)return null;s(l,t,r[0]);var h=o(l,f);if(0>h||h>v)return null;i(p,l,u);var d=o(n,p);if(0>d||h+d>v)return null;var g=o(c,p)/v;return e[0]=t[0]+g*n[0],e[1]=t[1]+g*n[1],e[2]=t[2]+g*n[2],e}var i=e("gl-vec3/cross"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),a=1e-6,u=[0,0,0],c=[0,0,0],l=[0,0,0],f=[0,0,0],p=[0,0,0];t.exports=r},{"gl-vec3/cross":32,"gl-vec3/dot":33,"gl-vec3/subtract":39}],47:[function(e,t,n){function r(e){function t(e,t){var i=o(e,t);r[0]=i.x,r[1]=i.y,n.emit("move",e)}e=e||{},e.element=e.element||window;var n=new s,r=e.position||[0,0];return e.touchstart!==!1&&(i(e.element,"mousedown",t),i(e.element,"touchstart",function(e){var n=e.targetTouches[0];t(e,n)})),i(e.element,"mousemove",t),i(e.element,"touchmove",function(e){var n=e.targetTouches[0];t(e,n)}),n.position=r,n}var i=e("add-event-listener"),o=e("mouse-event-offset"),s=e("events/");t.exports=function(e){return r(e).position},t.exports.emitter=function(e){return r(e)}},{"add-event-listener":48,"events/":49,"mouse-event-offset":50}],48:[function(e,t,n){function r(e,t,n,r){return c=c||(document.addEventListener?{add:o,rm:s}:{add:a,rm:u}),c.add(e,t,n,r)}function i(e,t,n,r){return c=c||(document.addEventListener?{add:o,rm:s}:{add:a,rm:u}),c.rm(e,t,n,r)}function o(e,t,n,r){e.addEventListener(t,n,r)}function s(e,t,n,r){e.removeEventListener(t,n,r)}function a(e,t,n,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,n)}function u(e,t,n,r){e.detachEvent("on"+t,n)}r.removeEventListener=i,r.addEventListener=r,t.exports=r;var c=null},{}],49:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],50:[function(e,t,n){function r(e){if(e===document.body||e===window)i.left=0,i.top=0;else{var t=e.getBoundingClientRect();i.left=t.left,i.top=t.top}return i}t.exports=function(e,t){e=e||window.event;var n=e.currentTarget||e.srcElement,i=t&&t.clientRect||r(n),o=t&&t.clientX,s=t&&t.clientY;return o="number"==typeof o?o:e.clientX,s="number"==typeof s?s:e.clientY,{x:o-i.left,y:s-i.top}};var i={left:0,top:0}},{}],51:[function(e,t,n){function r(e,t,n,r){a.beginPath(),a.lineCap="round",a.lineWidth=1,a.fillStyle=a.strokeStyle=c[n%c.length],o(a,t,f.cells,n,n+1),r?a.fill():a.stroke()}var i=e("touch-position")(),o=e("draw-triangles-2d"),s=e("canvas-fit-loop"),a=e("2d-context")(),u=a.canvas;document.body.appendChild(u);var c=e("array-range")(100).map(function(){var e=260*Math.random();return"hsl("+e.toFixed(15)+", 50%, 50%)"}),l=e("../")({fov:Math.PI/4,near:.01,far:100}),f=e("icosphere")(1),p=0,v=s(u).start();v.on("tick",function(e){p+=e/1e3;var t=v.shape[0],n=v.shape[1],o=[0,0,t,n];a.clearRect(0,0,t,n);var s=3.5,u=Math.cos(p/4)*s,c=Math.sin(p/4)*s;l.identity(),l.translate([u,0,c]),l.lookAt([0,0,0]),l.viewport=o,l.update();var h=f.positions.map(function(e){return l.project(e)});f.cells.forEach(function(e,t){r(e,h,t,!1)});for(var d=[i[0],n-i[1]],g=l.createPickingRay(d),m=0;m<f.cells.length;m++){var y=f.cells[m],w=g.intersectsTriangleCell(y,f.positions);if(w){r(y,h,m,!0);break}}})},{"../":1,"2d-context":5,"array-range":6,"canvas-fit-loop":15,"draw-triangles-2d":24,icosphere:40,"touch-position":47}]},{},[51]);
